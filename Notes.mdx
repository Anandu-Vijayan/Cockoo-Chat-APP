## Cockoo

### 1 Create a new project

- `npx create-react-app client --template typescript`
- `npm i @mui/material @emotion/react @emotion/styled @fontsource/roboto @mui/icons-material`

### 2 Implement Dark Theme using MUI and some base styling

- `createTheme` API and `ThemeProvider` for dark theme
- `CssBaseline` for base styling

### 3 Login Form
    
### 4 Add routing with react router dom

- `npm i react-router-dom localforage match-sorter sort-by`
- packages: `react-router-dom`, `localforage`, `match-sorter`, `sort-by`
- react-router-dom is used for routing
- localforage is used for storing data in local storage
- match-sorter is used for sorting and filtering data
- sort-by is used for sorting data

### 5 NestJS BE setup

- install nestjs globally: `npm i -g @nestjs/cli`
- create a new nestjs project: `nest new server`
- `pnpm run start:dev` to start the server


### 6 SetUp MongoDB
- `pnpm i @nestjs/config @nestjs/mongoose mongoose`
- @nestjs/config :configaration module for Nest
- @nestjs/mongoose :MongDB object modeling tool
- mongoose :MongDB object modeling tool
- `pnpm i joi` for validation
- will validate env varibiles as well
- Mongodb Installation 


### 7 SetUp graphQL and apollo,users resources
- `pnpm i @nestjs/graphql @nestjs/apollo @apollo/server graphql`
- `nest g resource users `,`? What transport layer do you use? GraphQL (code first)`,`? Would you like to generate CRUD entry points? Yes` Implement this for avoiding error
- grapql plaground :`http://localhost:4000/graphql`

### 8 Abstract Repository And Abstract Schema
- abstact Schema and  repository for DB
- abstract schema for comon fields
- abstract repository for common methods

### 9 User CRUD ,User Entity and User Repository,Refactor Abstract entity , Abstract repositary

### 10 User CRUD Countined
- `pnpm i bcrypt` and `pnpm i --D @types/bcrypt`  used for passwoed Hashing
- sample graphQL queries and mutations:
- createUser : 

```mutation{
createUser(createUserInput:{
email:"test@gmail.com",
password:"test1234"}){
_id
email
}}```


### 11 MongoDB compass
- `https://www.mongodb.com/try/download/compass` for mongodb compass
- `https://www.mongodb.com/try/download/atlas` for mongodb atlas


### 12 Add Logging With Pino logger

- https://github.com/pinojs/pino
- `pnpm i @nestjs/pino @nestjs/pino-http pino-pretty`

### 13 Modify logging config for production

### 14 DB Migrations Up and Down

- `pnpm i migrate-mongo`
- type:`pnpm i -D @types/migrate-mongo`
- `pnpm i mongodb`
- create Migration for user-email-index.ts
- we can use this for validation to make unique emails


### 15 Apollo Client setup
-apollo client is a graphQL client that helps us to intract with the graphQLserver from the client side i.e react app
-it will help us manage data both local and remote
-it will help us fetch,cache and modify data
-we need to write query and mutation on ui
- `pnpm i @apollo/client graphql` from ui folder

### 16 Create User
-To fix Cors issue : set this 
"proxy":"http://localhost:4000"


### 17 Backend Authentication with Passport
-`pnpm install --save @nestjs/passport passport passport-local`
-`pnpm install --save-dev @types/passport-local`
-https://docs.nestjs.com/recipes/passport
-we are using passport-local strategy for now
 -it will accept a username and password and return a jwt token
 -generate auth module:`nest g module auth`
 -generate auth service:`nest g service auth`